<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Git and GitHub for Collaboration</title>
    <meta charset="utf-8" />
    <meta name="author" content="Z Richard Li" />
    <link href="Git-intro_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="Git-intro_files/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Git and GitHub for Collaboration
### Z Richard Li
### Fall, 2020

---

 
# Overview
#### This lecture
+ A brief history and philosophy of version control and workflow in research settings. 
+ Introduction to Git and GitHub.
+ Hands-on tutorials: using Git.
+ Some additional topics that might be of interest, particular to STAT students. 

#### What I hope us to achieve
+ Reflect on your workflow and think if Git will be useful to you in your current and future projects.
+ If you are regular Git user, have some fun and feel free to share your tips with the group. 
+ If you are new to Git, get familiar with the concepts and basic operations. 

#### These slides at: [https://github.com/richardli/Git-Intro](https://github.com/richardli/Git-Intro)


---
# Collaboration in research

Most academic researchers use two strategies for collaboration:

**Shared Folders (Dropbox/Box/Google Drive)**

+ Single synced shared folder.
  + `draft_20190717.tex`
  + `draft_20190719_old_backup.tex`
  + `submit_final_final_v3.tex`
+ Simultaneous editing results in conflicts.
  + `submit_final_final_v3 (MIKE D's conflicted copy).tex`
+ Restoring older version is possible.
+ Offline work is possible.
+ Resolving conflicts of different versions manually.
 

---
# Collaboration in research

**Online concurrent editing (Google Docs/Overleaf)**
+ Single synced shared file.
+ Simultaneously editing.
+ Previous versions stored online.
+ No versioning or branching.
+ Conflicts cannot arise when multiple people working on the same document online.
+ Offline work either impossible or difficult to merge.
+ Difficult (impossible?) for collaborative coding projects.


---
# Problems
These strategies work well for rich text document when there is a single main version. 

Managing complex projects can be difficult when you have 
  + many files, directories, and dependencies,
  + many people contributing and making edits on different files,
  + different "working versions" that are similar and exist in parallel for a period of time.

These approaches do not scale to complex collaborative projects. Someone needs to be on top of all the files and changes to fix any errors (without destroying other changes).

####System for managing collaboration
In software engineering, workers have developed _social and technological solutions_ to the problem of managing collaborative work. 

The technological aspect of this system is usually called _version control_.


---
# Why version control 
Version control helps team (or even individual!) manage and keep track of changes over time. 

In collaborative work, it is not reasonable to block collaborators from working on the project while one person makes changes to a single file
    
It is easier for team members to work in parallel and keep track of each change: who made what change at what point in time and why. 

Merging multiple changes on the same file is always painstaking -- what if there is a tool to make it somewhat automatic and easier to track?


 
---
# Git

Git was created by Linus Torvalds, the inventor of Linux, in 2005 to manage work by hundreds of developers on the Linux kernel.

Git was designed for software development by large teams. But it is useful for many kinds of projects.

**Big ideas**
+ distributed, parallel workflow
+ every contributor has a full copy of the repository and its history
+ fast and scalable.

---
# Git
Unfortunately Git can be difficult to learn for people unfamiliar with modern software development practices and newcomers to version control.


&lt;img src="figures/git-doc-example.png" width="50%" style="display: block; margin: auto;" /&gt;

---
# GitHub 
GitHub  is an online platform for hosting Git repositories.

GitHub  offers many additional services:
+ Access control
+ Issue tracking
+ Pull requests with code review and comments
+ Markdown rendering
+ Gists
+ Wikis
+ GitHub  pages
+ Integration with other productivity/teamwork apps (e.g., Slack)

An academic GitHub  account with unlimited public and private repositories is free.

---
.center[![](figures/github.png)]

---
# Getting started with Git

Do you have Git? On the UNIX command line (terminal app in mac and cmd in windows), type:

```bash
git --version
```
If you do not have Git, follow these instructions:

[https://www.atlassian.com/git/tutorials/install-git](https://www.atlassian.com/git/tutorials/install-git)

If you do not have an GitHub  account, sign up at: 

[https://github.com/](https://github.com/)


---
# Graphical interfaces to Git

GitHub  Desktop and Sourcetree are two of the most popular GUIs. I will use Sourcetree in this tutorial. You can connect your GitHub  account (or other online platforms) to Sourcetree in `Preferences &gt; Accounts`.

.center[![](figures/sourcetree.png)]


---
# Basics of Git workflow
Today I will cover only a small part of the workflow:

1. Clone a remote repo
2. Create your own local or remote repo
3. Making and tracking changes
4. Merging changes from someone else

These simple steps cover a large proportion of routine workflow with Git.

---
# Tutorial I: clone these slides
.center[[https://github.com/richardli/Git-Intro](https://github.com/richardli/Git-Intro)]

.pull-left[ 
  From the web page:
  ![](figures/clone1.png)
]
.pull-right[ 
  From Sourcetree:
  ![](figures/clone2.png)
]


These are your local copies. Making changes does not affect the upstream repo (in my account). 

What if you want to collaborate in someone else's repo?
+ Ask to be added as collaborator
+ Forking and Pull request (propose one-time changes to others' repos)

---
# Tutorial I: look inside a repo

.pull-left[ 
  ![](figures/folder1.png)
]
.pull-right[ 
  ![](figures/folder2.png)
]

+ **README**
  + Things the authors want people to know upfront.
+ **.git**
  + A directory of lots of goodies in your project -- you don't need to interact with it directly. 
+ **.gitignore** 
  + A file that tells git which files should not be tracked.


---
# Tutorial I: look into the past
.center[![](figures/sourcetree.png)]

---
# Tutorial II: Create your remote repo
.center[![](figures/create-repo.png)]

---
# Tutorial II: Create your local repo
.center[![](figures/clone2.png)]

---
# Tutorial III: More than Cmd+S
In Git, a 'commit' is a collection of changes in the repository. 

#### Making changes
+ Edit the files

#### Stage changes
+ The files that are ready to form the next *commit* 

#### Commit changes
+ Save the staged changes to the local repository and add message to yourself and others

#### Push changes (if you have a remote repo)
+ Send the changes to the remote repo


---
# Tutorial III: ~~Oops, scratch that~~

#### Checkout
+ Temporarily switching to a past point (remember not making changes)

#### Revert
+ Undo the last commit

#### Reset
+ Rest every _tracked_ file to a specific point in time (remember to check files in .gitignore) 
  

---
# Now, collaborating with Git
Just using Git on your own is complicated. 

Using Git to collaborate with several other people on a project can be difficult.

&lt;img src="figures/xkcd.png" width="38%" style="display: block; margin: auto;" /&gt;

&lt;center&gt;
  https://imgs.xkcd.com/comics/git.png 
&lt;/center&gt;

---
# Tutorial IV: Am I ready to push?
+ **Pull** before push
  * get the remote updates others have made.

+ If nothing shows up after pulling --&gt; awesome!

+ Otherwise, likely you have a merge conflict
  * This happens when you and your collaborator made changes on the same lines of codes in the same file, that Git does not know how to resolve automatically.
  * You will need to tell Git what final version would be.
  * There are different tools to make the side-by-side comparison easier visually. 
  * If you are in doubt, don't force it. Communicate with your collaborator.


---
# Some practical considerations

###Some useful practices
+ Make small and frequent commits with detailed (and searchable) messages.
+ Git diff are line-based, so make lines small. 
+ Break up codes into several files. 
+ Try not to leave uncommitted changes open for a long time.
+ Use .gitignore wisely.

###Be aware of
+ Rich texts (e.g., .docx, .xlsx) 
+ Very large files (e.g., high resolution pdf, large .RData files)
+ **Sensitive information (e.g., passwords, sensitive data)**


---
# Additional topics
### Latex
+ `.gitignore` can be very helpful in maintaining only the necessary files to compile (no .aux, .log, .out, .bbl, .blg, ..., or even the paper.pdf)
+ Some people use a Makefile to compile, which can be useful when you have multiple .tex files.
+ Line break after each sentence is good for git diff to track, but can be annoying to collaborators (or yourself!)
+ Overleaf/ShareLaTex is a good alternative (when you have good internet).

---
# Additional topics
### R packages
+ The GitHub repo is the package.
+ There are tools to make it easy to make releases, generate help files, and for others to install directly from GitHub and provide feedback.
+ Many more flexible features to write documents, vignettes, and websites, e.g., [pkgdown](https://pkgdown.r-lib.org/)
+ Tools to check your package can build, install, and 'works', e.g., [TravisCI](https://docs.travis-ci.com/user/languages/r)  

### GitHub pages
+ A very useful way to set up your personal/professional website or specific projects: [pages.github](https://pages.github.com/).

---
# So, will my Git now go smoothly?
.center[![](figures/force.jpg)]


---
# Don't be discouraged!


.center[### Git is expressly designed to make you feel less intelligent than you thought you were.] 

.right[-- Andrew Morton, when introducing Linus Torvalds &lt;br&gt;at a 2007 Google tech talk]

&lt;br&gt;
.center[### So I think it used to be true but isn’t any more. There is a few reasons people feel that way, but I think only one of them remains. The one that remains is fairly simple: “you can do things so many ways.” ... Generally, the best way to learn git is probably to first only do very basic things and not even look at some of the things you can do until you are familiar and confident about the basics.]

.right[-- Linus Torvalds, 2015]


---
## Topics not covered here

Branching

Pull requests

Command line Git

GitHub  issues page

...

---
# Resources

There are many git tutorials out there. 

What if I have a problem? Google it.

Likely you will find different people asking the same question over and over again over many years!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
